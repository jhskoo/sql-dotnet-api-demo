# sql-dotnet-api-demo
# SQL + .NET API Demo

This repository demonstrates how to expose a SQL Server stored procedure through a modern .NET Core Web API using Dapper.
The stored procedure accepts dynamic parameters for filtering, keyword search, paging, and output formatting (JSON or XML), simulating common logic used in enterprise reporting dashboards or administrative tools.
The API controller accepts HTTP GET requests, passes them to the stored procedure using Dapper, and returns the raw JSON or XML result directly to the client.

---

## ğŸ”§ Technologies Used

- SQL Server 2016â€“2022
- T-SQL Stored Procedure
- ASP.NET Core (.NET 6+)
- Dapper (micro ORM)
- RESTful Web API

---

## ğŸ“ Project Structure
/SqlScripts/
usp_SearchEmployees.sql     â€“ Stored procedure with filters, paging, JSON/XML output
EmployeeController.cs          â€“ Web API controller calling the stored proc with parameters
appsettings.json               â€“ Sample config file with DB connection format
README.md                      â€“ This file

---

## ğŸ§  Stored Procedure Overview

The `usp_SearchEmployees.sql` file demonstrates how to write a production-style stored procedure with:

- Dynamic filters using nullable parameters (`DepartmentID`, `IsActive`, `Search`)
- Common Table Expressions (CTE)
- Pagination using `OFFSET / FETCH`
- Optional output as `FOR JSON PATH` or `FOR XML`
- Robust error handling with `TRY...CATCH` and `TRANSACTION`

This approach simulates real-world stored procedures supporting frontend data grids or reports.

> ğŸ” Note: All tables, data structures, and logic are generic and safe for public demonstration.

---

## ğŸ“˜ API Controller Overview

The `EmployeeController.cs` file demonstrates how to expose a SQL Server stored procedure via a modern ASP.NET Core Web API using Dapper for data access.

### ğŸ”§ Features:
- RESTful `GET /api/employee/search` endpoint
- Accepts dynamic filters: `DepartmentID`, `IsActive`, `Search` keyword
- Supports paging via `Page` and `PageSize` parameters
- Allows output format selection (`JSON` or `XML`)
- Returns raw data generated by the stored procedure with minimal transformation
- Uses Dapper for fast, lightweight parameterized SQL execution

This controller structure is ideal for backend services where logic is encapsulated in stored procedures and returned directly to API consumers â€” a common pattern in enterprise systems and internal tools.

> ğŸ“ Note: In a full project, Dapper would be installed via `Install-Package Dapper` or `dotnet add package Dapper`.

---

## ğŸŒ Sample API Usage
GET /api/employee/search?departmentId=2&isActive=true&search=lee&page=1&pageSize=10&outputFormat=JSON

Returns:
- JSON or XML from SQL Server
- Filtered and paginated employee records

---

## âš ï¸ Disclaimer

All examples in this repository are for demonstration only.  
No proprietary or production code is included.

---

## ğŸ‘¨â€ğŸ’» About

Created by **Jason Koo** â€“ Backend developer with 15+ years of experience in SQL Server, SSIS, .NET Core, and enterprise systems.  
Available for part-time or contract backend roles (remote preferred).

[GitHub Profile Â»](https://github.com/jhskoo)
